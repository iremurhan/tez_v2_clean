# Cross-Modal Retrieval Configuration (Tez v2 Clean)

# ==========================================
# Data Configuration
# ==========================================
data:
  features_path: "datasets/coco/features"
  # Caption path: Using Karpathy JSON structure usually
  captions_path: "datasets/coco/annotations_train_val2014/annotations/captions_train2014.json"
  batch_size: 64
  num_workers: 4
  max_length: 50  # Max token length for DistilBERT (saves compute)

# ==========================================
# Model Architecture
# ==========================================
model:
  image_dim: 2048        # ResNet feature dimension (Pool5)
  text_model_name: "distilbert-base-uncased" # HuggingFace model ID
  text_dim: 768          # DistilBERT output dimension
  embed_dim: 256         # Joint embedding space (Start small for speed)
  dropout: 0.1           # Dropout probability for projection heads

# ==========================================
# Loss Configuration (Inter + Intra)
# ==========================================
loss:
  temperature: 0.07      # For Contrastive Loss (InfoNCE)
  intra_weight: 0.0      # Weight for Intra-modal structure loss (Start 0.0 for baseline, then 0.1)

# ==========================================
# Training Configuration
# ==========================================
training:
  epochs: 10
  # CRITICAL: Separated learning rates to protect pre-trained BERT
  text_encoder_lr: 0.00002  # 2e-5 (Very small for BERT)
  head_lr: 0.001            # 1e-3 (Standard for Projection Heads)
  seed: 42
  optimizer: "adamw"        # AdamW is better for Transformers
  weight_decay: 0.0001
  scheduler: "cosine"
  warmup_epochs: 1          # 1 epoch warmup is sufficient

# ==========================================
# Logging Configuration
# ==========================================
logging:
  use_wandb: true
  wandb_project: "coco-retrieval-thesis"
  log_freq: 10              # Log every 10 batches to see progress
  save_freq: 5              # Save checkpoint every 5 epochs
  checkpoint_dir: "checkpoints"

# ==========================================
# Debug Configuration
# ==========================================
debug:
  debug_mode: false         # Set true to use tiny subset
  debug_samples: 100        # Only use 100 images for debugging
  disable_wandb_sync: true  # Don't upload debug logs